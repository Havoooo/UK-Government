name: Add another
description: |
  A progressive enhancement feature that uses javascript to add additional sections
body: |
  Typically it is used when you the user needs to add multiple entries. A good example of this is when a user has to enter their previous employments or an address history.
part_of_admin_layout: true
accessibility_criteria: |
  The component must:

  - accept focus
  - be focusable with a keyboard
  - be usable with a keyboard
  - be usable with touch
  - indicate when they have focus
  - be recognisable as form textarea elements
  - have correctly associated labels
examples:
  default:
    data:
      block: |
        <div class="govuk-form-group">
            <label class="govuk-label" for="item-name-{{ index }}">
              Shopping list item
            </label>
            <input class="govuk-input" id="item-name-{{ index }}" name="item-name-{{ index }}" type="text" />
          </div>
  with_items:
    data:
      items:
        - value: Milk
        - value: Bread
      block: |
        <div class="govuk-form-group">
            <label class="govuk-label" for="with-items-{{ index }}">
              Shopping list item
            </label>
            <input class="govuk-input" id="with-items-{{ index }}" name="with-items-{{ index }}" type="text" value="{{ value }}" />
          </div>
  with_rails_delete_input:
    description: |
      When the `delete_mode` is set to `hide`, the component will hide the section (instead of removing it) and search the template for any inputs with `[_destroy]` in the name and set the value to `1`. This allows it to be compatible with the way rails manages deletion.
    data:
      delete_mode: hide
      items:
        - value: Strawberries
        - value: Pineapple
      block: |
        <div class="govuk-form-group">
            <label class="govuk-label" for="with-rails-delete-input-{{ index }}">
              Shopping list item
            </label>
            <input class="govuk-input" id="with-rails-delete-input-{{ index }}" name="with-rails-delete-input-{{ index }}" type="text" value="{{ value }}" />
            <input type="hidden" name="with-rails-delete-input[{{ index }}][_destroy]" value="false">
          </div>
  with_custom_id_param:
    data:
      id: some-random-id
      block: |
        <div class="govuk-form-group">
            <label class="govuk-label" for="item-name-{{ index }}">
              Shopping list item
            </label>
            <input class="govuk-input" id="item-name-{{ index }}" name="item-name-{{ index }}" type="text" />
          </div>
  with_custom_add_button_label:
    data:
      add_button_label: Add item
      block: |
        <div class="govuk-form-group">
            <label class="govuk-label" for="item-name-{{ index }}">
              Shopping list item
            </label>
            <input class="govuk-input" id="item-name-{{ index }}" name="item-name-{{ index }}" type="text" />
          </div>
  with_custom_delete_button_label:
    data:
      delete_button_label: Delete item
      items:
        - value: Strawberries
        - value: Pineapple
      block: |
        <div class="govuk-form-group">
            <label class="govuk-label" for="item-name-{{ index }}">
              Shopping list item
            </label>
            <input class="govuk-input" id="item-name-{{ index }}" name="item-name-{{ index }}" type="text" value="{{ value }}" />
          </div>
  with_custom_empty_state_message:
    data:
      empty_state_message: |
        oh no, you have no items in your basket ðŸ˜­
      block: |
        <div class="govuk-form-group">
            <label class="govuk-label" for="item-name-{{ index }}">
              Shopping list item
            </label>
            <input class="govuk-input" id="item-name-{{ index }}" name="item-name-{{ index }}" type="text" value="{{ value }}" />
          </div>
  with_multiple_fields:
    description: |
      This example illustrates how to use the `add another` component with multiple fields.
    data:
      empty_state_message: |
        No previous address added.
      add_button_label: Add previous address
      delete_button_label: Remove this address
      items:
        - address_line_1: The White Chapel Building
          address_line_2: 10 Whitechapel High St
          address_town_city: London
          address_county: London
          address_postcode: E1 8QS
      block: |
        <fieldset class="govuk-fieldset">
            <legend class="govuk-fieldset__legend govuk-fieldset__legend--l">
              <h2 class="govuk-fieldset__heading">
                Previous address
              </h2>
            </legend>
            <div class="govuk-form-group">
              <label class="govuk-label" for="previous-address-{{ index }}-address-line-1">
                Address line 1
              </label>
              <input class="govuk-input" id="previous-address-{{ index }}-address-line-1" name="previous-address-{{ index }}-address-line-1" type="text" autocomplete="address-line1" value="{{ address_line_1 }}">
            </div>
            <div class="govuk-form-group">
              <label class="govuk-label" for="previous-address-{{ index }}-address-line-2">
                Address line 2 (optional)
              </label>
              <input class="govuk-input" id="previous-address-{{ index }}-address-line-2" name="previous-address-{{ index }}-address-line-2" type="text" autocomplete="address-line2"  value="{{ address_line_2 }}">
            </div>
            <div class="govuk-form-group">
              <label class="govuk-label" for="previous-address-{{ index }}-address-town">
                Town or city
              </label>
              <input class="govuk-input govuk-!-width-two-thirds" id="previous-address-{{ index }}-address-town" name="previous-address-{{ index }}-address-town" type="text" autocomplete="address-level2"  value="{{ address_town_city }}">
            </div>
            <div class="govuk-form-group">
              <label class="govuk-label" for="previous-address-{{ index }}-address-county">
                County (optional)
              </label>
              <input class="govuk-input govuk-!-width-two-thirds" id="previous-address-{{ index }}-address-county" name="previous-address-{{ index }}-address-county" type="text"  value="{{ address_county }}">
            </div>
            <div class="govuk-form-group">
              <label class="govuk-label" for="previous-address-{{ index }}-address-postcode">
                Postcode
              </label>
              <input class="govuk-input govuk-input--width-10" id="previous-address-{{ index }}-address-postcode" name="previous-address-{{ index }}-address-postcode" type="text" autocomplete="postal-code"  value="{{ address_postcode }}">
            </div>
          </fieldset>
