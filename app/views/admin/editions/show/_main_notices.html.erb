<% if edition.rejected? %>
  <%= render "govuk_publishing_components/components/error_alert", {
    message: "Document has been rejected",
    description: sanitize("Rejected by #{linked_author(edition.rejected_by, class: "govuk-link")}. See History and Notes.")
  } %>
<% end %>

<% if edition.force_published? %>
  <%= render "govuk_publishing_components/components/error_alert", {
    message: "This edition was force published and has not yet been reviewed by a second pair of eyes",
    description: capture do %>
      <% if can?(:approve, edition) %>
        <p class="govuk-body"><%= link_to "View this on the website", preview_document_url(edition), class: "govuk-link", target: '_blank' %> and check everything thoroughly.</p>
        <%=
          confirm = "Are you sure you want to retrospectively approve this document?"
          form_for [:admin, edition], url: approve_retrospectively_admin_edition_path(edition, lock_version: edition.lock_version), method: :post do |form|
            render("govuk_publishing_components/components/button", {
              text: "Looks good",
              margin_bottom: true,
              data_attributes: { confirm: }
            })
          end
        %>
      <% else %>
        <p class="govuk-body">Please have an editor other than the original publisher review the document to clear this warning.</p>
      <% end %>
    <% end
  } %>
<% end %>

<% if edition.pre_publication? %>

  <% if edition.is_a?(Publication) && edition.statistics_announcement.present? %>
    <%= render "govuk_publishing_components/components/notice", {
      description_govspeak: capture do %>
        <p class="govuk-body">This publication has been announced for publication <%= edition.statistics_announcement.display_date %>.</p>
        <p class="govuk-body"><%= link_to 'View announcement', [:admin, edition.statistics_announcement], class: "govuk-link" %></p>
      <% end
    } %>
  <% end %>

  <% if edition.scheduled_publication.present? %>
    <div class="app-view-edition-summary__scheduled-notice">
      <%= render "govuk_publishing_components/components/notice", {
        description_govspeak: capture do %>
          <% if edition.scheduled? %>
            <p class="govuk-body">Scheduled for publication on <%= l edition.scheduled_publication, format: :long %>.</p>
          <% else %>
            <p class="govuk-body">Scheduled publication proposed for <%= l edition.scheduled_publication, format: :long %>.</p>
          <% end %>
        <% end
      } %>
    </div>
  <% end %>

<% end %>

<% if warn_about_lack_of_contacts_in_body?(edition) %>
  <%= render "govuk_publishing_components/components/notice", {
    description: "This press release has no contact information embedded in the body. You may want to edit it and add some."
  } %>
<% end %>
