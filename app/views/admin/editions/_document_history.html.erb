<%= link_to("Add internal note", new_admin_edition_editorial_remark_path(@edition), class: "govuk-body govuk-link") %>

<%= render "govuk_publishing_components/components/inset_text", {
  text: "History and notes have been merged. #{tag.a('Read more about the change', href: admin_whats_new_path)}".html_safe
} %>

<% if @document_history.entries_on_newer_editions(@document_history.entries, @edition).present? %>
  <h3 class="govuk-heading-m">On newer editions</h3>

  <ul class="gem-c-list govuk-list">
    <% @document_history.entries_on_newer_editions(@document_history.entries, @edition).each do |entry| %>
      <% if entry.is_a?(EditorialRemark) %>
        <%= render(Admin::Editions::EditorialRemarkComponent.new(editorial_remark: entry)) %>
      <% else %>
        <%= render(Admin::Editions::AuditTrailEntryComponent.new(entry: entry)) %>
      <% end %>
    <% end %>
  </ul>
<% end %>

<% if @document_history.entries_on_current_edition(@document_history.entries, @edition).present? %>
  <h3 class="govuk-heading-m">On this edition</h3>

  <ul class="gem-c-list govuk-list">
    <% @document_history.entries_on_current_edition(@document_history.entries, @edition).each do |entry| %>
      <% if entry.is_a?(EditorialRemark) %>
        <%= render(Admin::Edition::EditorialRemarkComponent.new(editorial_remark: entry)) %>
      <% else %>
        <%= render(Admin::Editions::AuditTrailEntryComponent.new(entry: entry)) %>
      <% end %>
    <% end %>
  </ul>
<% end %>


<% if @document_history.entries_on_previous_editions(@document_history.entries, @edition).present? %>
  <h3 class="govuk-heading-m">On previous editions</h3>

  <ul class="gem-c-list govuk-list">
    <% @document_history.entries_on_previous_editions(@document_history.entries, @edition).each do |entry| %>
      <% if entry.is_a?(EditorialRemark) %>
        <%= render(Admin::Editions::EditorialRemarkComponent.new(editorial_remark: entry)) %>
      <% else %>
        <%= render(Admin::Editions::AuditTrailEntryComponent.new(entry: entry)) %>
      <% end %>
    <% end %>
  </ul>
<% end %>
