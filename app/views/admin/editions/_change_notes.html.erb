<% if edition.allows_attachments? && edition.changed_attachments.any? %>
  <div class="alert alert-info">
    <h4> Attachments you've added, changed or deleted </h4>
    <ul class="govuk-list">
      <% label_classes = {created: "label-success", updated: "label-warning", deleted: "label-danger"} %>
      <% edition.changed_attachments.each do |attachment| %>
        <li>
          <%= "#{attachment.attachment.title} - #{attachment.attachment.readable_type} attachment" %>
          <%= tag.span attachment.status, class: ["label", label_classes[attachment.status]] %>
        </li>
      <% end %>
    </ul>
  </div>
<% end %>

<%= render "govuk_publishing_components/components/radio", {
  heading: "Do users have to know the content has changed?",
  name: "edition[minor_change]",
  items: [
    {
      value: false,
      text: "Yes - information has been added, updated or removed",
      hint_text: "A change note will be published on the page and emailed to users subscribed to email alerts. The ‘last updated’ date will change.",
      bold: true,
      checked: edition.minor_change == false,
      conditional: (render "govuk_publishing_components/components/textarea", {
        label: {
          text: "Describe the change for users",
          bold: true,
        },
        name: "edition[change_note]",
        value: edition.change_note,
        hint: (tag.p('Tell users what has changed, where and why. Write in full sentences, leading with the most important words. For example, "College A has been removed from the registered sponsors list because its licence has been suspended."', class: "govuk-!-margin-bottom-0 govuk-!-margin-top-0") +
              link_to("guidance about change notes (opens in a new tab)", "https://www.gov.uk/guidance/content-design/writing-for-gov-uk#change-notes", target: "_blank", class: "govuk-link")).html_safe
      })
    },
    {
      value: true,
      text: "No – it’s a minor edit that does not change the meaning",
      bold: true,
      hint_text: "This includes fixing a typo or broken link, a style change or similar. Users signed up to email alerts will not get notified and the ‘last updated’ date will not change.",
      checked: edition.minor_change,
    }
  ]
} %>
